pipeline{

agent any

stages {
stage('Clone')
{

steps{

git branch: 'master',url: "https://github.com/saranmsps/simple-java-maven-app.git"
}
}

stage('Artifactory configuration')
{
steps{
rtServer(
id: "ARTIFACTORY_SERVER",
url: "http://52.42.159.159:8081/artifactory",
credentialsId: 'saranmspsJfrog'
)

rtMavenDeployer(

id: "MAVEN_DEPLOYER",
serverId: "ARTIFSCTORY_SERVER",
releaseRepo: "libs-release-local",
snapshotRepo: "libs-snapshot-local"
)

rtMavenResolver(

id: "MAVEN_RESOLVER",
serverId: "ARTIFSCTORY_SERVER",
releaseRepo: "libs-release",
snapshotRepo: "libs-snapshot"
)
}
}

stage("Exec Maven")
{

steps{

rtMavenRun(

tool: MAVEN,
pom: 'pom.xml',
goals: 'clean install',
deployement: "MAVEN_DEPLOYER",
resolverId: "MAVEN_RESOLVER"
)
}
}
stage("publish build info")
{
steps{
rtPublishBuildInfo(

serverId: "ARTIFACTORY_SERVER"
)
}
}
}
}

